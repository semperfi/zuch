<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:f="http://xmlns.jcp.org/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="/templates/main.xhtml">
        
        <ui:define name="menu">
            <ui:include src="/protected/views/menu.xhtml"/>
        </ui:define>
        
        <ui:define name="content">
         
            <h:form id="pendingReceivedRequestsForm" styleClass="form-search" >
         
                <div align="center">   
                 
                  <p:panel id="pendingReceivedRequestsPanelGroup" styleClass="table-responsive">
                        
                      <f:facet name="header">  
                               CURRENT RECEIVED REQUESTS
                      </f:facet> 
                           
                      
                      <p:dataTable value="#{receivedRequestsBacking.retrievePendingRequests()}"
                                        id="pendingReceivedRequestsListTable"
                                        var="currentRequest" styleClass="table"
                                        paginator="true"
                                        paginatorAlwaysVisible="false"
                                        scrollable="true"
                                        scrollHeight="270"
                                        rows="20"
                                        pageLinks="-1">
                         
                              
                              <p:column>
                                <f:facet name="header">
                                    TITLE
                                </f:facet>
                                    #{currentRequest.requestedAudio.id3.title}
                                </p:column>
                              <p:column>
                                <f:facet name="header">
                                    ARTIST
                                </f:facet>
                                    #{currentRequest.requestedAudio.id3.artist}
                                </p:column>
                                <p:column>
                                <f:facet name="header">
                                    ALBUM
                                </f:facet>
                                    #{currentRequest.requestedAudio.id3.album}
                               </p:column>
                              <p:column>
                                <f:facet name="header">
                                    GENRE
                                </f:facet>
                                    #{currentRequest.requestedAudio.id3.genre}
                               </p:column>
                              <p:column>
                                <f:facet name="header">
                                    YEAR
                                </f:facet>
                                    #{currentRequest.requestedAudio.id3.audioYear}
                               </p:column>
                              
                              <p:column>
                                <f:facet name="header">
                                    REQUESTER
                                </f:facet>
                                  <h:outputText value="#{currentRequest.requester.id}" 
                                                style="color: #189807; font-weight: bolder;"/>
                                    
                               </p:column>
                              
                               <p:column>
                                <f:facet name="header">
                                    ACTIONS
                                </f:facet>
                             
                                <h:commandLink value="Accept" 
                                               rendered="#{receivedRequestsBacking.showRequestLink(currentRequest)}"
                                               action="#{receivedRequestsBacking.acceptRequest(currentRequest)}"
                                               style="color: #06338c; font-weight: bolder;">
                                    <f:ajax execute="@form"  render="@form"/>
                                </h:commandLink>
                                   <p:spacer width="10" />
                                 <h:commandLink value="Reject"
                                               rendered="#{receivedRequestsBacking.showRequestLink(currentRequest)}"
                                               action="#{receivedRequestsBacking.rejectRequest(currentRequest)}"
                                               style="color: #06338c; font-weight: bolder;">
                                    <f:ajax execute="@form"  render="@form"/>
                                </h:commandLink>
                                 
                               </p:column>
                          
                          </p:dataTable>
                          
                      </p:panel>
                      
                      
                      
                         <p:spacer height="35" />
                         
                         <p:growl  id="requestGrowl" showDetail="true"/>
                        
                       </div>       
          </h:form>
            
        </ui:define>
        
    </ui:composition>
    

    
</html>